<!DOCTYPE html>
<html>

<head>
      <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Begin Jekyll SEO tag v -->



<meta name="generator" content="Jekyll v4.3.2" />





<meta property="og:locale" content="" />

  <link rel="shortcut icon" type="image/png" href="/webdataconnector/assets/logo.png">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="/webdataconnector/assets/css/main.css">
  <link rel="stylesheet" href="/webdataconnector/assets/css/github-highlight.css">

  <script src="/webdataconnector/assets/js/redirect-to-search.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>



</head>

<body>
    <div class="container">
        <header class="site-header">
  <div class="wrapper">
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand navbar-brand-logo" href="/webdataconnector/#">Tableau Web Data Connector</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="/webdataconnector/docs/index.html">Docs</a></li>
            <li><a href="/webdataconnector/docs/api_ref.html">API Reference</a></li>
            <li><a href="/webdataconnector/community/">Community Connectors</a></li>
            <li><a target="_blank" href="https://community.tableau.com/s/topic/0TO4T000000QFBJWA4/web-data-connector">Forum</a></li>
            <li><a href="/webdataconnector/news/">What's New?</a></li>
            
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li class="tableauIcon"><a target="_blank" href="http://tableau.com"><img src="/webdataconnector/assets/logo.png" alt="Tableau Developers" class="logo" /></a></li>
            <li><a target="_blank" href="https://github.com/tableau/webdataconnector"><span class="icon icon--github" title="WDC on GitHub" alt="WDC on GitHub"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span></a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
  </div>
</header>

        <div class="well docs-menu col-xs-12 col-sm-4 col-md-3">
    <div class="search-container form-group has-feedback">
    <form id="docs-search">
        <input type="search" id="search-input" class="custom-search form-control" placeholder="Search the docs..." search-url="/webdataconnector/docs/search.html">
        <span class="glyphicon glyphicon-search form-control-feedback"></span>
    </form>
</div>


    <ul class="nav nav-list">
        <li class="nav-header">Overview</li>
        <li>
            <a href="/webdataconnector/docs/index.html">Get Started</a>
        </li>
        <li>
            <a href="/webdataconnector/docs/wdc_tutorial.html">Tutorial</a>
        </li>
        <li>
            <a href="/webdataconnector/docs/wdc_use_in_tableau.html">Use a WDC in Tableau Desktop</a>
        </li>
		<li>
            <a href="/webdataconnector/docs/wdc_use_in_server.html">Use a WDC in Tableau Server</a>
        </li>

        <li class="nav-header">Basic Concepts</li>
        <li>
            <a href="/webdataconnector/docs/wdc_phases.html">Lifecycle and Phases</a>
        </li>
        <li>
            <a href="/webdataconnector/docs/wdc_library_versions.html">API Versions</a>
        </li>
        <li>
            <a href="/webdataconnector/docs/wdc_samples.html">Samples</a>
        </li>
        <li>
            <a href="/webdataconnector/docs/wdc_debugging.html">Debugging in the Simulator and Tableau</a>
        </li>
        <li>
            <a href="/webdataconnector/docs/wdc_hosting_and_submissions.html">Hosting and Submitting to Community Portal</a>
        </li>

        <li class="nav-header">Advanced Concepts</li>
        <li>
            <a href="/webdataconnector/docs/wdc_multi_table_tutorial.html">Multiple Tables Tutorial</a>
        </li>
        <li>
            <a href="/webdataconnector/docs/wdc_oauth_tutorial.html">Node.js Proxy with OAuth Tutorial</a>
        </li>
        <li>
            <a href="/webdataconnector/docs/wdc_standard_connections.html">Standard Connections</a>
        </li>
        <li>
            <a href="/webdataconnector/docs/wdc_join_filtering.html">Join Filtering</a>
        </li>
        <li>
            <a href="/webdataconnector/docs/wdc_custom_init_and_shutdown.html">Custom Initialization and Shutdown</a>
        </li>
        <li>
            <a href="/webdataconnector/docs/wdc_get_data.html">Get Data: Best Practices</a>
        </li>
        <li>
            <a href="/webdataconnector/docs/wdc_incremental_refresh.html">Incremental Refresh</a>
        </li>
        <li>
            <a href="/webdataconnector/docs/wdc_authentication.html">Authentication</a>
        </li>
        <li>
            <a href="/webdataconnector/docs/wdc_cors.html">Working with CORS</a>
        </li>

        <li class="nav-header">Reference</li>
        <li>
            <a href="/webdataconnector/docs/wdc_resources.html">Resources</a>
        </li>
        <li>
            <a href="/webdataconnector/docs/wdc_ref_date_formats.html">Supported Date Formats</a>
        </li>
        <li>
            <a href="/webdataconnector/docs/wdc_faq.html">FAQ</a>
        </li>
		    <li>
		    <a href="/webdataconnector/docs/wdc_upgrade.html">Upgrading from WDC Version 1.x</a>
        </li>
        <li>
		    <a href="/webdataconnector/docs/wdc_webengine.html">Troubleshoot WDC WebEngine Issues</a>
		   </li>
           <li>
		    <a href="/webdataconnector/docs/wdc_about.html">About Tableau Help</a>
		   </li>
    </ul>
</div>


        <div class="content .col-xs-12 .col-sm-8 .col-md-9">
            <h1>WDC Working with CORS</h1>
            <div class="alert alert-info"><p><strong>Important</strong>: Tableau Web Data Connector 2.0 (this version) is being deprecated at Tableau 2023.1 and eventually retired. We will still support WDC 2.0 until its last compatible version of Tableau (Tableau 2022.4) goes End of Life and is no longer supported.</p>

            <p>For information about Tableau Web Data Connector 3.0, see the <a href="https://help.tableau.com/current/api/webdataconnector/en-us/index.html">WDC 3.0 documentation</a>.</p>
            </div>
            <div class="edit-container">
                <a href="https://github.com/tableau/webdataconnector/edit/master/docs/wdc_cors.md" class="edit-links"><span class="glyphicon glyphicon-pencil"></span> Edit this page</a>
                &nbsp;
                <a href="https://github.com/tableau/webdataconnector/issues" class="edit-links"><span class="glyphicon glyphicon-flag"></span> Submit an issue</a>
            </div>
            <br />
            <p>The JavaScript code in a web data connector typically makes requests to
a server that’s on a different domain than the one that’s hosting the
web data connector’s HTML page. That is, the code makes requests that
represent cross-origin resource sharing (CORS). As a security measure,
most browsers restrict CORS requests made from JavaScript code.</p>

<p>This restriction can result in errors when the web data connector runs.
For example, if the code in your connector makes requests to a server that
doesn’t allow CORS requests, you might see an error like the following in
your browser console:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>XMLHttpRequest cannot load URL. No 'Access-Control-Allow-Origin' header is present on the requested resource.
</code></pre></div></div>

<p>If your connector experiences CORS-related errors when trying to access
another site, you can try the approaches listed in this topic:</p>

<ul id="markdown-toc">
  <li><a href="#proxy-server" id="markdown-toc-proxy-server">Make requests through a proxy server</a></li>
  <li><a href="#request-access" id="markdown-toc-request-access">Request CORS support from API Server</a></li>
  <li><a href="#jsonp" id="markdown-toc-jsonp">Make requests with JSONP</a></li>
</ul>

<p><strong>Note</strong>: For information about how to use the Web Data Connector
simulator to help debug errors, including CORS errors, see <a href="/webdataconnector/docs/wdc_debugging">Debugging in the Simulator and Tableau</a>.</p>

<h2 id="proxy-server">Make requests through a proxy server</h2>

<p>To circumvent browser restrictions on CORS, you can use a proxy server.
A proxy server acts as a simple go-between for your connector and the server that you
want to get data from. Because a proxy server doesn’t run in a browser, it isn’t
limited by the same restrictions on CORS.</p>

<p>If the proxy server is in the same domain as the web data connector,
JavaScript in the connector page does not run into CORS restrictions. If
the proxy server is in another domain, the proxy server can be
configured to set the <code class="language-plaintext highlighter-rouge">Access-Control-Allow-Origin</code> header to allow
requests from the connector’s domain.</p>

<p>The WDC SDK comes with a test proxy server that you can use out of the box.</p>

<ol>
  <li>
    <p>From the top-level directory of the repository, open a command prompt or terminal and run the following command:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm start
</code></pre></div>    </div>

    <p>The test proxy server and test web server start.</p>
  </li>
  <li>
    <p>In your connector code, prefix your requests with the following URL:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://localhost:8889
</code></pre></div>    </div>

    <p>For example, for the <code class="language-plaintext highlighter-rouge">earthquakeUSGS</code> connector, you would change the <code class="language-plaintext highlighter-rouge">$.getJSON</code> function from this:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$.getJSON("http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/4.5_week.geojson",
...
</code></pre></div>    </div>

    <p>To this:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$.getJSON("http://localhost:8889/earthquake.usgs.gov/earthquakes/feed/v1.0/summary/4.5_week.geojson",
</code></pre></div>    </div>
  </li>
</ol>

<p><strong>Important:</strong> The test proxy server supports HTTP API calls only.</p>

<p>If you want to share your connectors with other users in your organization, you can download
and configure a production proxy server, or you can use a free, public proxy server like <a href="https://cors-anywhere.herokuapp.com/">https://cors-anywhere.herokuapp.com/</a>.</p>

<h2 id="request-access">Request CORS support from API Server</h2>

<p>To allow CORS requests, the server that hosts the data can set the
<code class="language-plaintext highlighter-rouge">Access-Control-Allow-Origin</code> header in the response. The header can be
set to specific domains (for example, <code class="language-plaintext highlighter-rouge">http://example.com</code>), or to <code class="language-plaintext highlighter-rouge">*</code>
to indicate that all domains are allowed access to the server’s data. To
get CORS support for requests from your connector, you can contact the
owners of the site that hosts the data you are querying and ask them to
add the <code class="language-plaintext highlighter-rouge">Access-Control-Allow-Origin</code> header with your domain in it, or
to add your domain if the site already sends the header.</p>

<p>For more information, see <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS">HTTP access
control</a>
on the Mozilla Developer Network site.</p>

<h2 id="jsonp">Make requests with JSONP</h2>

<p>If the site that contains the data doesn’t support CORS, it’s often
possible to get data from the site by using <em>JSON with padding</em>, or
JSONP. JSONP provides an alternative to making requests directly in
JavaScript, since those are blocked. Instead, you use JavaScript to
dynamically create or update a <code class="language-plaintext highlighter-rouge">&lt;script&gt;</code> element and set its <code class="language-plaintext highlighter-rouge">src</code>
attribute to a URL that points to the site that has the data. The
URL also contains the name of a callback function that’s in the
connector page. If the site supports JSONP, the response includes the
data in JSON format, “padded” with a call to the callback function.</p>

<p>If you use jQuery in your web data connector, you can make JSONP calls
using the <span class="api-command-ref">ajax</span> function. For more
information, see <a href="http://api.jquery.com/jQuery.ajax/">jQuery.ajax()</a> on
the jQuery site.</p>

<p>If you aren’t using jQuery, you can implement JSONP in your JavaScript
code. For example, a connector might contain the following JavaScript
code, which dynamically creates a <code class="language-plaintext highlighter-rouge">&lt;script&gt;</code> element and sets its <code class="language-plaintext highlighter-rouge">src</code>
attribute to the URL of a server that has a fictional temperature
service. The URL includes various parameters; one of the parameters is
the name of a callback function. When the new <code class="language-plaintext highlighter-rouge">&lt;script&gt;</code> element is
created, the browser invokes the URL that the <code class="language-plaintext highlighter-rouge">src</code> attribute is set to.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">var</span> <span class="nx">scriptTag</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nf">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">script</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">scriptTag</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">http://myserver/temperatures?city=Seattle&amp;year=2014&amp;callback=getTemperatures</span><span class="dl">"</span><span class="p">;</span>
    <span class="nb">document</span><span class="p">.</span><span class="nf">getElementsByTagName</span><span class="p">(</span><span class="dl">'</span><span class="s1">head</span><span class="dl">'</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nf">appendChild</span><span class="p">(</span><span class="nx">scriptTag</span><span class="p">);</span>
</code></pre></div></div>

<p>The connector must also include the following function, which is invoked
by the “padded” JSON that the temperature site returns. The JSON data is
passed to the function as the <span class="api-placeholder">jsonpData</span> parameter, and the code in the
function can extract values as it would from any JSON block.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">var</span> <span class="nx">getTemperatures</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">jsonpData</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">alert</span><span class="p">(</span><span class="nx">jsonpData</span><span class="p">.</span><span class="nx">someProperty</span><span class="p">);</span>
        <span class="c1">// More code here to extract the JSON data</span>
    <span class="p">}</span>
</code></pre></div></div>

<p>For more information, see <a href="https://en.wikipedia.org/wiki/JSONP">JSONP</a>
on Wikipedia.</p>


            <!-- Footer -->
<footer>
    <div class="row">
            <hr class="footer-hr">
            <p>This site is open source. Suggestions and pull requests are welcome on our <a href="https://github.com/tableau/webdataconnector">GitHub page</a>.</p>
            <p><a href="https://www.tableau.com/en-us/legal" class="aLegal">LEGAL</a> <a href="https://www.salesforce.com/company/privacy/" class="aLegal">PRIVACY</a> &copy; 2003&ndash;<script>document.write(new Date().getFullYear())</script> TABLEAU SOFTWARE LLC. ALL RIGHTS RESERVED</p>
            <sub>Documentation last generated on: 2023-03-07 13:27:13 -0800</sub>
    </div>
</footer>

        </div>
    </div>
</body>

</html>
